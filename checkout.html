<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ููุฎุต ุงูุณูุฉ</title>
  
<link rel="stylesheet" href="css/checkout.css">

</head>
<body>

  <h2>๐ ููุฎุต ุงูุณูุฉ</h2>
  <div id="cart-summary" class="cart-summary"></div>
  <div class="total">ุงูุฅุฌูุงูู: <span id="total-price">0.00</span> ุฑ.ุณ</div>

  <h2>๐ ุจูุงูุงุช ุงูุนููู</h2>
  <form id="checkout-form" class="checkout-form">
    <label>ุงูุงุณู ุงููุงูู:
      <input type="text" name="fullName" required>
    </label>
    <label>ุฑูู ุงููุงุชู:
      <input type="tel" name="phone" required>
    </label>
    <label>ุงูุนููุงู:
      <input type="text" name="address" required>
    </label>
    <button type="submit">ุฅุฑุณุงู ุงูุทูุจ ุนุจุฑ ูุงุชุณุงุจ</button>
  </form>

  <script>
  document.addEventListener("DOMContentLoaded", () => {
    // ุงุณุชุฑุฌุงุน ุงูุณูุฉ
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const summaryDiv = document.getElementById('cart-summary');
    const totalSpan  = document.getElementById('total-price');
    let total = 0;

    // ุนุฑุถ ุงูููุชุฌุงุช
    cart.forEach(item => {
      const div = document.createElement('div');
      div.className = 'product-item';
      div.innerHTML = `<span>${item.name}</span> <span>${item.price} ุฑ.ุณ ร ${item.quantity}</span>`;

      summaryDiv.appendChild(div);
      total += parseFloat(item.price) * item.quantity;
    });
    totalSpan.textContent = total.toFixed(2);

    // ุฅุฑุณุงู ุงูุทูุจ ุฅูู ูุงุชุณุงุจ
    document.getElementById('checkout-form').addEventListener('submit', function (e) {
      e.preventDefault();
      const customer = Object.fromEntries(new FormData(this).entries());

      let productsText = '';
      cart.forEach(item => {
        productsText += `โข ${item.name} ร ${item.quantity} = ${(parseFloat(item.price) * item.quantity).toFixed(2)} ุฑ.ุณ\n`;

      });

      const message = `
ุทูุจ ุฌุฏูุฏ โ
ุงูุงุณู: ${customer.fullName}
ุงููุงุชู: ${customer.phone}
ุงูุนููุงู: ${customer.address}

ุงูููุชุฌุงุช:
${productsText}
ุงูุฅุฌูุงูู: ${total.toFixed(2)} ุฑ.ุณ
      `.trim();

      // ุถุน ุฑููู ุจุฏู 966501234567
      const whatsappURL = `https://wa.me/213558603017?text=${encodeURIComponent(message)}`;

      window.open(whatsappURL, '_blank');

      // ุชูุฑูุบ ุงูุณูุฉ
      localStorage.removeItem('cart');
      setTimeout(() => {
        window.location.href = 'index.html';
      }, 2000);
    });
  });
  </script>

</body>
</html>