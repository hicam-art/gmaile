<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta http-equiv="refresh" content="">
  <meta charset="utf-8">
  <title>متجري | الرئيسية</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <div class="container">
      <h1 class="logo">TO7FA</h1>
      <nav>
        <a href="shop.html">تسوق الآن</a>
        <a href="cart.html">سلتي (<span id="cartCount">0</span>)</a>
      </nav>
    </div>
  </header>

  <main class="hero">
    <div class="container">



      
<div class="brand-show">
  <img src="images/p4.png" alt="شعار متجري" class="logo-img">
  <span class="brand-text">متجري</span>
</div>



      <p>اختر ما يعجبك واطلب عبر واتساب في ثوانٍ.</p>
      <a href="shop.html" class="btn primary">تصفح المنتجات</a>
    </div>
  </main>

  <section class="featured container">
    <h3>منتجات مميزة</h3>
    <div class="products" id="featuredList">
      <!-- يُملأ لاحقاً من products.json -->
      
    </div>
  </section>

  <footer>
    <div class="container">
      <small>© 2025 متجري - جميع الحقوق محفوظة</small>
    </div>
  </footer>

  <script src="js/cart.js"></script>
  <script>
    // عرض عدد السلة
    updateCartCount();
  </script>

<script>
(async () => {
  try {
    const res   = await fetch('data/products.json');
    if (!res.ok) throw new Error('فشل تحميل الملف ' + res.status);
    const prods = await res.json();
    console.log('البيانات المحملة:', prods); // شوف الكونسول هل يطبع شيء؟
    const box   = document.getElementById('featuredList');

    const featured = prods.slice(0, 3);
    featured.forEach(p => {
      box.innerHTML += `
        <div class="card">
          <img src="${p.image}" alt="${p.name}">
          <h4>${p.name}</h4>
          <p class="price">${p.price} ريال</p>
          <button onclick="addToCart(${p.id},'${p.name}',${p.price})">أضف للسلة</button>
        </div>`;
    });
  } catch (err) {
    console.error('خطأ أثناء التحميل:', err);
    alert('تعذر تحميل المنتجات، تفقد الكونسول للتفاصيل.');
  }
})();
</script>
</body>
</html>